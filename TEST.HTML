<!DOCTYPE html>
<html>
<head>
    <title>TD3 exo 2</title>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
</head>
<body>
    <!-- Zone SVG pour le graphique -->
    <svg id="dessin"></svg>

    <script>
    const width = 400;   // largeur du graphique
    const height = 200;  // hauteur du graphique
    const margin = {top: 20, right: 10, bottom: 30, left: 40};

    // Couleurs par espèce d'iris
    const colors = {
        "setosa": "#69b3a2",
        "versicolor": "#a269b3",
        "virginica": "#b3a269"
    };

    // Chargement du fichier JSON et appel de la fonction ScatterPlot
    d3.json("iris.json").then(ScatterPlot);

    function ScatterPlot(iris) {
        // Sélection du SVG et définition de la viewBox
        const svg = d3.select("#dessin")
            .attr("viewBox", `0 0 ${width} ${height}`);

        // Échelle X : sépales
        const fX = d3.scaleLinear()
            .domain(d3.extent(iris, d => d.sepalLength)) // min et max
            .range([margin.left, width - margin.right]);  // pixels

        // Échelle Y : pétales
        const fY = d3.scaleLinear()
            .domain(d3.extent(iris, d => d.petalLength))
            .range([height - margin.bottom, margin.top]); // inversion Y pour SVG

        // Ajout des cercles représentant les iris
        svg.selectAll("circle")
            .data(iris)
            .join("circle")
            .attr("cx", d => fX(d.sepalLength))   // position X
            .attr("cy", d => fY(d.petalLength))   // position Y
            .attr("r", width/100)                 // rayon
            .attr("fill", d => colors[d.species]); // couleur selon espèce

        // Axe X
        svg.append("g")
            .attr("transform", `translate(0,${height - margin.bottom})`)
            .call(d3.axisBottom(fX));

        // Axe Y
        svg.append("g")
            .attr("transform", `translate(${margin.left},0)`)
            .call(d3.axisLeft(fY));

        // Titres des axes
        const gTitresAxes = svg.append("g")
            .attr("font-family", "sans-serif")
            .attr("font-size", height/20)
            .attr("text-anchor", "end")
            .attr("fill", "black");

        // Titre axe X
        gTitresAxes.append("text")
            .attr("x", width - margin.right)
            .attr("y", height)
            .attr("dominant-baseline", "ideographic")
            .text("sepalLength");

        // Titre axe Y
        gTitresAxes.append("text")
            .attr("transform", "rotate(-90)")
            .attr("x", -margin.top)
            .attr("y", 0)
            .attr("dominant-baseline", "hanging")
            .text("petalLength");
    }
    </script>
</body>
</html>
